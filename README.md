LLD for ATM using state design pattern, notice how we are using the instance of ATMMachine in the state implementations to alter the machine state.
